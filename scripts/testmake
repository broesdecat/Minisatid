#LICENSEPLACEHOLDER
#!/bin/bash
#test all makes

function makeone {
	mkdir testbuild
	cd testbuild
	../configure --enable-build=static --enable-bits=32 --enable-sat=$1 --enable-gmp=$2
	if [[ $? -ne 0 ]]
	then
		rm -r testbuild
		echo "Failed $1 $2"
		return 1
	fi
	make
	if [[ $? -ne 0 ]]
	then
		rm -r testbuild
		echo "Failed $1 $2"
		return 1
	fi
	cd -
	rm -r testbuild
	return 0
}

makeone old no
if [[ $? -ne 0 ]]
then
	exit 1
fi
makeone old yes
if [[ $? -ne 0 ]]
then
	exit 1
fi
makeone hack no
if [[ $? -ne 0 ]]
then
	exit 1
fi
makeone hack yes
if [[ $? -ne 0 ]]
then
	exit 1
fi
makeone new no
if [[ $? -ne 0 ]]
then
	exit 1
fi
makeone new yes
if [[ $? -ne 0 ]]
then
	exit 1
fi
